
    
<!doctype html>
<meta charset=utf8>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel=stylesheet href='./styles.css'>
<script defer src='./script.js'></script>
<title>Home</title>
<body>
<script>window.relativeToRoot="."</script>
<div id='error-message'>
  ⚠️ Oops! This page doesn't appear to define a <span>type</span> called <code>_</code>.
</div>

    
    <div class='container'>
    
    <div class='sidebar-wrapper'>
    <div class='sidebar-expander'>Show navigation</div>
    <div class='sidebar'>
      <a href="./search.html" style="display: block; padding: 0 8px;">Search</a>
      <div class='docs-listing'><a href="./index.html">Home</a></div>
      <div class='table-of-contents'>
      <div class='toc-header'>Page Contents</div>
      <a href="#austere.re" class='level-1 header'>Austere.re</a>
<a href="#example-usage" class='level-2 header'>Example usage</a>
      </div>
      <div class='project-listing'><div class='project-title'>Package modules</div><a href="./api/Austere.html">Austere</a>
<a href="./api/Test.html">Test</a></div>
    </div>
    </div>
  
    <div class='main'>
    <a href="https://github.com/jaredly/austere.re/blob/master/docs/./index.md" class="edit-link">Edit</a>
    <a href="#austere.re" id="austere.re"><h1>Austere.re</h1></a>

<p>A no-frills cli argument parser for reason, inspired by <a href="https://www.npmjs.com/package/austere" target="_blank" rel="noopener nofollow" title="" class="external-link">austere</a> and <a href="https://www.npmjs.com/package/yargs" target="_blank" rel="noopener nofollow" title="" class="external-link">yargs</a>.</p>
<a href="#example-usage" id="example-usage"><h2>Example usage</h2></a><p>(from <a href="https://www.npmjs.com/package/pack.re" target="_blank" rel="noopener nofollow" title="" class="external-link">pack.re</a>):</p>
<pre class='code'><code>let <span class='pattern-ident' data-type="(
    ~?bools: option(list(Austere.StrSet.elt)),
    ~?floats: option(list(Austere.StrSet.elt)),
    ~?ints: option(list(Austere.StrSet.elt)),
    list(string)
) => Austere.result(
    Austere.opts,
    [&gt; `BadValue of Austere.StrSet.elt * string
 | `Unknown of Austere.StrSet.elt ]
)">parse</span> = <span class='ident' data-type="(
    ~?alias: option(list((string, Austere.StrSet.elt))),
    ~?presence: option(list(Austere.StrSet.elt)),
    ~?bools: option(list(Austere.StrSet.elt)),
    ~?floats: option(list(Austere.StrSet.elt)),
    ~?ints: option(list(Austere.StrSet.elt)),
    ~?strings: option(list(Austere.StrSet.elt)),
    ~?multi: option(list(Austere.StrSet.elt)),
    list(string)
) => Austere.result(
    Austere.opts,
    [&gt; `BadValue of Austere.StrSet.elt * string
 | `Unknown of Austere.StrSet.elt ]
)">Austere.parse</span>(~alias=[<span data-type="list((string, Austere.StrSet.elt))">(<span class='string' data-type="string">&quot;h&quot;</span>, <span class='string' data-type="Austere.StrSet.elt">&quot;help&quot;</span>)</span>], ~presence=[<span data-type="list(Austere.StrSet.elt)"><span class='string' data-type="Austere.StrSet.elt">&quot;help&quot;</span></span>], ~multi=[<span data-type="list(Austere.StrSet.elt)"><span class='string' data-type="Austere.StrSet.elt">&quot;rename&quot;</span></span>], ~strings=[<span data-type="list(Austere.StrSet.elt)"><span class='string' data-type="Austere.StrSet.elt">&quot;base&quot;</span></span>]);

let <span class='pattern-ident' data-type="string">help</span> = <span class='string' data-type="string">{|
# pack.re - a simple js bundler for reason

Usage: pack.re [options] entry-file.js &gt; bundle.js

  --base (default: current directory)
      expected to contain node_modules
  --rename newName=realName (can be defined multiple times)
      maps `require(&quot;newName&quot;)` to a node_module called &quot;realName&quot;
  -h, --help
      print this help
|}</span>;

let <span class='pattern-ident' data-type="string => 'a">fail</span> = (<span class='pattern-ident' data-type="string">msg</span>) =&gt; {
  <span class='ident' data-type="string => unit">Js.log</span>(<span class='ident' data-type="string">msg</span>);
  <span class='ident' data-type="string => unit">Js.log</span>(<span class='ident' data-type="string">help</span>);
  <span class='ident' data-type="int => 'a">exit</span>(<span class='int' data-type="int">1</span>);
};

let <span class='pattern-ident' data-type="list(string)">args</span> = <span class='ident' data-type="list(string) => list(string)">List.tl</span>(<span class='ident' data-type="array(string) => list(string)">Array.to_list</span>(<span class='ident' data-type="array(string)">Sys.argv</span>));
/* Some example args for you */
let <span class='pattern-ident' data-type="list(string)">args</span> = [<span data-type="list(string)"><span class='string' data-type="string">&quot;--base&quot;</span>, <span data-type="list(string)"><span class='string' data-type="string">&quot;awesome&quot;</span>, <span data-type="list(string)"><span class='string' data-type="string">&quot;some-entry.js&quot;</span></span></span></span>];

switch (<span class='ident' data-type="(
    ~?bools: option(list(Austere.StrSet.elt)),
    ~?floats: option(list(Austere.StrSet.elt)),
    ~?ints: option(list(Austere.StrSet.elt)),
    list(string)
) => Austere.result(
    Austere.opts,
    [&gt; `BadValue of Austere.StrSet.elt * string
 | `Unknown of Austere.StrSet.elt ]
)">parse</span>(<span class='ident' data-type="list(string)">args</span>)) {
| <span class='pattern-constructor' data-type="Austere.result(
    Austere.opts,
    [&gt; `BadValue of Austere.StrSet.elt * string
 | `Unknown of Austere.StrSet.elt ]
)">Austere.Error</span>(<span class='pattern-ident' data-type="[&gt; `BadValue of Austere.StrSet.elt * string
 | `Unknown of Austere.StrSet.elt ]">err</span>) =&gt; <span class='ident' data-type="string => unit">fail</span>(<span class='ident' data-type="[ `BadValue of Austere.StrSet.elt * string | `Unknown of Austere.StrSet.elt ] => string">Austere.report</span>(<span class='ident' data-type="[ `BadValue of Austere.StrSet.elt * string | `Unknown of Austere.StrSet.elt ]">err</span>))
| <span class='pattern-constructor' data-type="Austere.result(
    Austere.opts,
    [&gt; `BadValue of Austere.StrSet.elt * string
 | `Unknown of Austere.StrSet.elt ]
)">Ok</span>(<span class='pattern-ident' data-type="Austere.opts">opts</span>) =&gt;
if (<span class='ident' data-type="(Austere.StrSet.elt, Austere.StrSet.t) => bool">Austere.StrSet.mem</span>(<span class='string' data-type="Austere.StrSet.elt">&quot;help&quot;</span>, <span class='ident' data-type="Austere.opts">opts</span>.<span class='field' data-type="Austere.StrSet.t">presence</span>)) {
  <span class='ident' data-type="string => unit">Js.log</span>(<span class='ident' data-type="string">help</span>); <span class='ident' data-type="int => unit">exit</span>(<span class='int' data-type="int">0</span>);
} else switch (<span class='ident' data-type="Austere.opts">opts</span>.<span class='field' data-type="list(string)">rest</span>) {
  | <span class='pattern-constructor' data-type="list(string)">[]</span> =&gt; <span class='ident' data-type="string => unit">fail</span>(<span class='string' data-type="string">&quot;Expected entry file as final argument&quot;</span>)
  | [<span data-type="list(string)"><span class='pattern-ident' data-type="string">entry</span></span>] =&gt; {
    let <span class='pattern-ident' data-type="option(string)">base</span> = <span class='ident' data-type="(Austere.StrMap.t(string), Austere.StrMap.key) => option(
    string
)">Austere.get</span>(<span class='ident' data-type="Austere.opts">opts</span>.<span class='field' data-type="Austere.StrMap.t(string)">strings</span>, <span class='string' data-type="Austere.StrMap.key">&quot;base&quot;</span>);
    let <span class='pattern-ident' data-type="list(string)">renames</span> = <span class='ident' data-type="(
    Austere.StrMap.t(list(string)),
    Austere.StrMap.key
) => list(string)">Austere.multi</span>(<span class='ident' data-type="Austere.opts">opts</span>.<span class='field' data-type="Austere.StrMap.t(list(string))">multi</span>, <span class='string' data-type="Austere.StrMap.key">&quot;rename&quot;</span>);
    <span class='ident' data-type="string => unit">Js.log</span>(<span class='string' data-type="string">&quot;All good!&quot;</span>)
  }
  | _ =&gt; <span class='ident' data-type="string => unit">fail</span>(<span class='string' data-type="string">&quot;Only one entry file allowed&quot;</span>)
}
};</code></pre>
    </div>
    <div class='right-blank'></div>
    </div>
  